@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------- 0. Base reset / iOS WKWebView friendliness ---------- */
html, body { margin: 0; }
#root {
  /* Ensure the app background extends into the iOS safe areas in native wrappers */
  min-height: 100vh;   /* fallback */
  min-height: 100svh;  /* iOS 16-17 */
  min-height: 100dvh;  /* modern browsers */
  background: inherit; /* extend body background */
}

/* Cover the entire safe area for fixed-position backgrounds/overlays */
.safe-area-cover { position: fixed; }
@supports (top: env(safe-area-inset-top)) {
  .safe-area-cover {
    top: calc(-1 * env(safe-area-inset-top));
    right: calc(-1 * env(safe-area-inset-right));
    bottom: calc(-1 * env(safe-area-inset-bottom));
    left: calc(-1 * env(safe-area-inset-left));
  }
}

/* ---------- 1. Default layout (browser) ---------- */
html, body, #root { height: 100%; }

/* Safe-area padding when the app runs in the browser */
body {
  min-height: 100vh;
  padding: env(safe-area-inset-top,0) env(safe-area-inset-right,0)
           env(safe-area-inset-bottom,0) env(safe-area-inset-left,0);
}

/* ---------- 2. Stand-alone PWA ---------- */
@media (display-mode: standalone) {
  body { padding: 0; }          /* remove browser padding */
  html, body, #root {
    position: fixed;
    inset: 0;
    width: 100vw;
    height: 100vh;   /* fallback */
    height: 100svh;  /* iOS 16-17 */
    height: 100dvh;  /* Android */
    overflow: hidden;
    overscroll-behavior: none;
    -webkit-overflow-scrolling: auto;
    touch-action: manipulation;
  }
}

/* ---------- 3. Utility to pin UI above home-indicator ---------- */
.bottom-safe { bottom: 10px; }
@supports (padding: max(0px)) {
  /* Allow containers to consume the bottom inset while keeping content away from the edge */
  .pb-safe { padding-bottom: max(env(safe-area-inset-bottom), 10px); }
}
@supports (bottom: env(safe-area-inset-bottom))   {
  .bottom-safe { bottom: calc(env(safe-area-inset-bottom) + 10px); }
}
@supports (bottom: constant(safe-area-inset-bottom)) {              /* old iOS */
  .bottom-safe { bottom: calc(constant(safe-area-inset-bottom) + 10px); }
}